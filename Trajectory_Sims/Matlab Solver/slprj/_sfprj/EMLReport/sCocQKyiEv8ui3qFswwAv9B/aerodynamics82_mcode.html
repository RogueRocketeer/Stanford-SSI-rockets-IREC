<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="53,1" id="srcline1"> 1</a></span><span class="line"><span class="comment">% Aerodynamics</span></span></span>
<span class="srcline"><span class="lineno"><a href="53,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">% Defines the aerodynamic forces acting on the rocket</span></span></span>
<span class="srcline"><span class="lineno"><a href="53,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">% Ian Gomez, Rushal Rege 04/11/2017</span></span></span>
<span class="srcline"><span class="lineno"><a href="53,4" id="srcline4"> 4</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="53,5" id="srcline5"> 5</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T3U3">Fdrag</span>, <span class="var type1" id="S3T3U4">Flift</span>, <span class="var type1" id="S4T3U5">CD</span>, <span class="var type1" id="S5T3U6">CL</span>, <span class="var type1" id="S6T3U7">aoa</span>, <span class="var type1" id="S7T3U8">CP</span>] = aerodynamics(<span class="var type1" id="S8T20U11">r</span>, <span class="var type1" id="S9T20U12">u</span>, <span class="var type1" id="S10T3U13">wind</span>, <span class="var type1" id="S11T5U14">aerodata</span>, <span class="var type1" id="S12T7U15">rocket</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="53,6" id="srcline6"> 6</a></span><span class="line"><span class="comment">% rev 2 = use OpenRocket subsonic drag and call RASAero drag past transonic</span></span></span>
<span class="srcline"><span class="lineno"><a href="53,7" id="srcline7"> 7</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="53,8" id="srcline8"> 8</a></span><span class="line"><span class="comment">% find angle of attack; see photo for help</span></span></span>
<span class="srcline"><span class="lineno"><a href="53,9" id="srcline9"> 9</a></span><span class="line"><span class="comment">% mathisfun.com/algebra/trig-solving-sas-triangles</span></span></span>
<span class="srcline"><span class="lineno"><a href="53,10" id="srcline10">10</a></span><span class="line"><span class="mxinfo " id="T3:U12"><span class="var type1" id="S13T3U18">ux</span> = <span class="mxinfo " id="T3:U14"><span class="var type1" id="S9T20U20">u</span>(<span class="mxinfo " id="T19:U16">1</span>)</span></span>; <span class="mxinfo " id="T3:U17"><span class="var type1" id="S14T3U24">uy</span> = <span class="mxinfo " id="T3:U19"><span class="var type1" id="S9T20U26">u</span>(<span class="mxinfo " id="T19:U21">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,11" id="srcline11">11</a></span><span class="line"><span class="mxinfo " id="T3:U22"><span class="var type1" id="S15T3U30">umag</span> = <span class="mxinfo " id="T3:U24">norm(<span class="mxinfo " id="T40:U25"><span class="var type1" id="S9T20U34">u</span>(1:2)</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,12" id="srcline12">12</a></span><span class="line"><span class="mxinfo " id="T3:U27"><span class="var type1" id="S17T3U40">phi</span> = <span class="mxinfo " id="T3:U29"><span class="mxinfo " id="T3:U30">90</span>-<span class="mxinfo " id="T3:U31"><span class="var type1" id="S8T20U44">r</span>(<span class="mxinfo " id="T19:U33">3</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,13" id="srcline13">13</a></span><span class="line"><span class="mxinfo " id="T3:U34"><span class="var type1" id="S18T3U48">resultant</span> = <span class="mxinfo " id="T3:U36"><span class="mxinfo " id="T3:U37"><span class="mxinfo " id="T3:U38"><span class="var type1" id="S15T3U52">umag</span>.^2</span> + <span class="mxinfo " id="T3:U40"><span class="var type1" id="S10T3U55">wind</span>.^2</span></span> - <span class="mxinfo " id="T3:U42"><span class="mxinfo " id="T3:U43"><span class="mxinfo " id="T3:U44"><span class="mxinfo " id="T3:U45">2</span>.*<span class="var type1" id="S15T3U61">umag</span></span>.*<span class="var type1" id="S10T3U62">wind</span></span>.*<span class="mxinfo " id="T3:U48">cosd(<span class="var type1" id="S17T3U65">phi</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,14" id="srcline14">14</a></span><span class="line"><span class="mxinfo " id="T3:U50"><span class="var type1" id="S20T3U68">lambda</span> = <span class="mxinfo " id="T3:U52">asind(<span class="mxinfo " id="T3:U53"><span class="mxinfo " id="T3:U54"><span class="var type1" id="S10T3U73">wind</span>.*<span class="mxinfo " id="T3:U56">sind(<span class="var type1" id="S17T3U76">phi</span>)</span></span>./<span class="var type1" id="S18T3U77">resultant</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,15" id="srcline15">15</a></span><span class="line"><span class="mxinfo " id="T3:U59"><span class="var type1" id="S6T3U80">aoa</span> = <span class="mxinfo " id="T3:U61"><span class="mxinfo " id="T3:U62"><span class="mxinfo " id="T3:U63">180</span> - <span class="var type1" id="S20T3U84">lambda</span></span> - <span class="var type1" id="S17T3U85">phi</span></span></span>; <span class="comment">%%</span></span></span>
<span class="srcline"><span class="lineno"><a href="53,16" id="srcline16">16</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="53,17" id="srcline17">17</a></span><span class="line"><span class="comment">% Calculate atmosphere</span></span></span>
<span class="srcline"><span class="lineno"><a href="53,18" id="srcline18">18</a></span><span class="line"><span class="mxinfo " id="T3:U66">[<span class="mxinfo " id="T3:U67">~</span>, <span class="mxinfo " id="T3:U68">~</span>, <span class="var type1" id="S23T3U91">rho</span>, <span class="var type1" id="S24T3U92">local_c</span>, <span class="var type1" id="S25T3U93">mu</span>] = <span class="fcn" id="F81N6:B95">getAtmoConditions</span>(<span class="mxinfo " id="T3:U72"><span class="var type1" id="S8T20U97">r</span>(<span class="mxinfo " id="T19:U74">2</span>)</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,19" id="srcline19">19</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="53,20" id="srcline20">20</a></span><span class="line"><span class="comment">% Check for mach number</span></span></span>
<span class="srcline"><span class="lineno"><a href="53,21" id="srcline21">21</a></span><span class="line"><span class="mxinfo " id="T3:U75"><span class="var type1" id="S27T3U101">mach</span> = <span class="mxinfo " id="T3:U77"><span class="var type1" id="S15T3U103">umag</span>/<span class="var type1" id="S24T3U104">local_c</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,22" id="srcline22">22</a></span><span class="line"><span class="mxinfo " id="T3:U80"><span class="var type1" id="S28T3U107">k</span> = <span class="mxinfo " id="T3:U82">1</span></span>; <span class="mxinfo " id="T3:U83"><span class="var type1" id="S29T3U111">tol</span> = <span class="mxinfo " id="T3:U85">0.01</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,23" id="srcline23">23</a></span><span class="line"><span class="keyword">while</span>(1)</span></span>
<span class="srcline"><span class="lineno"><a href="53,24" id="srcline24">24</a></span><span class="line">    <span class="mxinfo " id="T3:U86"><span class="var type1" id="S30T3U118">delta</span> = <span class="mxinfo " id="T3:U88">abs(<span class="mxinfo " id="T3:U89"><span class="var type1" id="S27T3U122">mach</span>-<span class="mxinfo " id="T3:U91"><span class="var type1" id="S11T5U124">aerodata</span>(<span class="var type1" id="S28T3U125">k</span>,<span class="mxinfo " id="T3:U94">1</span>)</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,25" id="srcline25">25</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T18:U95"><span class="var type1" id="S30T3U130">delta</span> &lt; <span class="var type1" id="S29T3U131">tol</span></span>; <span class="keyword">break</span>; <span class="keyword">end</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,26" id="srcline26">26</a></span><span class="line">    <span class="mxinfo " id="T3:U98"><span class="var type1" id="S28T3U135">k</span> = <span class="mxinfo " id="T3:U100"><span class="var type1" id="S28T3U137">k</span> + <span class="mxinfo " id="T3:U102">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,27" id="srcline27">27</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="53,28" id="srcline28">28</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="53,29" id="srcline29">29</a></span><span class="line"><span class="comment">% Reynolds number</span></span></span>
<span class="srcline"><span class="lineno"><a href="53,30" id="srcline30">30</a></span><span class="line"><span class="mxinfo " id="T3:U103"><span class="var type1" id="S32T3U141">ft2m</span> = <span class="mxinfo " id="T3:U105">0.3048</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,31" id="srcline31">31</a></span><span class="line"><span class="mxinfo " id="T3:U106"><span class="var type1" id="S33T3U145">rocket_length</span> = <span class="mxinfo " id="T3:U108"><span class="mxinfo " id="T3:U109">11</span>*<span class="var type1" id="S32T3U148">ft2m</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,32" id="srcline32">32</a></span><span class="line"><span class="mxinfo " id="T3:U111"><span class="var type1" id="S34T3U151">Re_rocket_y</span> = <span class="mxinfo " id="T3:U113"><span class="mxinfo " id="T3:U114"><span class="mxinfo " id="T3:U115"><span class="var type1" id="S23T3U155">rho</span>*<span class="var type1" id="S15T3U156">umag</span></span>*<span class="var type1" id="S33T3U157">rocket_length</span></span>/<span class="var type1" id="S25T3U158">mu</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,33" id="srcline33">33</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="53,34" id="srcline34">34</a></span><span class="line"><span class="comment">% determine what state the rocket is in aerodynamically</span></span></span>
<span class="srcline"><span class="lineno"><a href="53,35" id="srcline35">35</a></span><span class="line"><span class="comment">% if rocket is falling - set theta</span></span></span>
<span class="srcline"><span class="lineno"><a href="53,36" id="srcline36">36</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="53,37" id="srcline37">37</a></span><span class="line"><span class="mxinfo " id="T3:U120"><span class="var type1" id="S35T3U161">rail_length</span> = <span class="mxinfo " id="T3:U122">5.4864</span></span>; <span class="comment">% m, which is pretty ridiculous</span></span></span>
<span class="srcline"><span class="lineno"><a href="53,38" id="srcline38">38</a></span><span class="line"><span class="mxinfo " id="T3:U123"><span class="var type1" id="S36T3U165">launch_site</span> = <span class="mxinfo " id="T3:U125">1293</span></span>; <span class="comment">% m, magic number</span></span></span>
<span class="srcline"><span class="lineno"><a href="53,39" id="srcline39">39</a></span><span class="line"><span class="mxinfo " id="T3:U126"><span class="var type1" id="S6T3U169">aoa</span> = <span class="mxinfo " id="T3:U128">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,40" id="srcline40">40</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="53,41" id="srcline41">41</a></span><span class="line"><span class="mxinfo " id="T3:U129"><span class="var type1" id="S37T3U173">Sdrag</span> = <span class="mxinfo " id="T3:U131"><span class="mxinfo " id="T3:U132"><span class="mxinfo " id="T3:U133">pi</span> .* (<span class="mxinfo " id="T3:U134"><span class="mxinfo " id="T3:U135"><span class="var type1" id="S12T7U181">rocket</span>.OD</span>.^2</span>)</span>./<span class="mxinfo " id="T3:U137">4</span></span></span>; <span class="comment">% axial surface area</span></span></span>
<span class="srcline"><span class="lineno"><a href="53,42" id="srcline42">42</a></span><span class="line"><span class="mxinfo " id="T3:U138"><span class="var type1" id="S39T3U187">Slift</span> = <span class="mxinfo " id="T3:U140"><span class="mxinfo " id="T3:U141"><span class="var type1" id="S12T7U190">rocket</span>.l</span>.*<span class="mxinfo " id="T3:U143"><span class="var type1" id="S12T7U193">rocket</span>.OD</span></span></span>;     <span class="comment">% projected surface area</span></span></span>
<span class="srcline"><span class="lineno"><a href="53,43" id="srcline43">43</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="53,44" id="srcline44">44</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T18:U145"><span class="mxinfo " id="T3:U146"><span class="var type1" id="S9T20U199">u</span>(<span class="mxinfo " id="T19:U148">2</span>)</span> &gt;= <span class="mxinfo " id="T3:U149">0</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="53,45" id="srcline45">45</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="53,46" id="srcline46">46</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T18:U150"><span class="mxinfo " id="T3:U151"><span class="var type1" id="S8T20U206">r</span>(<span class="mxinfo " id="T19:U153">2</span>)</span> &lt;= <span class="mxinfo " id="T3:U154"><span class="var type1" id="S35T3U209">rail_length</span>+<span class="var type1" id="S36T3U210">launch_site</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="53,47" id="srcline47">47</a></span><span class="line">        <span class="mxinfo " id="T3:U157"><span class="var type1" id="S6T3U213">aoa</span> = <span class="mxinfo " id="T3:U159">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,48" id="srcline48">48</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="53,49" id="srcline49">49</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="53,50" id="srcline50">50</a></span><span class="line">    <span class="comment">% Compare angle of attack and use weighted average</span></span></span>
<span class="srcline"><span class="lineno"><a href="53,51" id="srcline51">51</a></span><span class="line">    <span class="comment">% aerodata = [RASMa, CD0, CD2, CD4, CL0, CL2, CL4, CP0, CP2, CP4];</span></span></span>
<span class="srcline"><span class="lineno"><a href="53,52" id="srcline52">52</a></span><span class="line">    <span class="keyword">if</span> <span class="mxinfo " id="T18:U160"><span class="mxinfo " id="T3:U161">abs(<span class="var type1" id="S6T3U220">aoa</span>)</span> &lt;= <span class="mxinfo " id="T3:U163">2</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="53,53" id="srcline53">53</a></span><span class="line">        <span class="mxinfo " id="T3:U164"><span class="var type1" id="S40T3U224">weight</span> = <span class="mxinfo " id="T3:U166"><span class="var type1" id="S6T3U226">aoa</span>/<span class="mxinfo " id="T3:U168">2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,54" id="srcline54">54</a></span><span class="line">        <span class="mxinfo " id="T3:U169"><span class="var type1" id="S4T3U230">CD</span> = <span class="mxinfo " id="T3:U171"><span class="mxinfo " id="T3:U172"><span class="var type1" id="S40T3U233">weight</span> * <span class="mxinfo " id="T3:U174"><span class="var type1" id="S11T5U235">aerodata</span>(<span class="var type1" id="S28T3U236">k</span>,<span class="mxinfo " id="T3:U177">3</span>)</span></span> + <span class="mxinfo " id="T3:U178">(<span class="mxinfo " id="T3:U179"><span class="mxinfo " id="T3:U180">1</span>-<span class="var type1" id="S40T3U242">weight</span></span>) * <span class="mxinfo " id="T3:U182"><span class="var type1" id="S11T5U244">aerodata</span>(<span class="var type1" id="S28T3U245">k</span>,<span class="mxinfo " id="T3:U185">2</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,55" id="srcline55">55</a></span><span class="line">        <span class="mxinfo " id="T3:U186"><span class="var type1" id="S5T3U249">CL</span> = <span class="mxinfo " id="T3:U188"><span class="mxinfo " id="T3:U189"><span class="var type1" id="S40T3U252">weight</span> * <span class="mxinfo " id="T3:U191"><span class="var type1" id="S11T5U254">aerodata</span>(<span class="var type1" id="S28T3U255">k</span>,<span class="mxinfo " id="T3:U194">6</span>)</span></span> + <span class="mxinfo " id="T3:U195">(<span class="mxinfo " id="T3:U196"><span class="mxinfo " id="T3:U197">1</span>-<span class="var type1" id="S40T3U261">weight</span></span>) * <span class="mxinfo " id="T3:U199"><span class="var type1" id="S11T5U263">aerodata</span>(<span class="var type1" id="S28T3U264">k</span>,<span class="mxinfo " id="T3:U202">5</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,56" id="srcline56">56</a></span><span class="line">        <span class="mxinfo " id="T3:U203"><span class="var type1" id="S7T3U268">CP</span> = <span class="mxinfo " id="T3:U205"><span class="mxinfo " id="T3:U206"><span class="var type1" id="S40T3U271">weight</span> * <span class="mxinfo " id="T3:U208"><span class="var type1" id="S11T5U273">aerodata</span>(<span class="var type1" id="S28T3U274">k</span>,<span class="mxinfo " id="T3:U211">9</span>)</span></span> + <span class="mxinfo " id="T3:U212">(<span class="mxinfo " id="T3:U213"><span class="mxinfo " id="T3:U214">1</span>-<span class="var type1" id="S40T3U280">weight</span></span>) * <span class="mxinfo " id="T3:U216"><span class="var type1" id="S11T5U282">aerodata</span>(<span class="var type1" id="S28T3U283">k</span>,<span class="mxinfo " id="T3:U219">8</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,57" id="srcline57">57</a></span><span class="line">    <span class="keyword">elseif</span> <span class="mxinfo " id="T18:U220"><span class="mxinfo " id="T3:U221">abs(<span class="var type1" id="S6T3U289">aoa</span>)</span> &lt;= <span class="mxinfo " id="T3:U223">4</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="53,58" id="srcline58">58</a></span><span class="line">        <span class="mxinfo " id="T3:U224"><span class="var type1" id="S40T3U293">weight</span> = <span class="mxinfo " id="T3:U226">(<span class="mxinfo " id="T3:U227"><span class="var type1" id="S6T3U297">aoa</span>-<span class="mxinfo " id="T3:U229">2</span></span>)/<span class="mxinfo " id="T3:U230">2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,59" id="srcline59">59</a></span><span class="line">        <span class="mxinfo " id="T3:U231"><span class="var type1" id="S4T3U302">CD</span> = <span class="mxinfo " id="T3:U233"><span class="mxinfo " id="T3:U234"><span class="var type1" id="S40T3U305">weight</span> * <span class="mxinfo " id="T3:U236"><span class="var type1" id="S11T5U307">aerodata</span>(<span class="var type1" id="S28T3U308">k</span>,<span class="mxinfo " id="T3:U239">04</span>)</span></span> + <span class="mxinfo " id="T3:U240">(<span class="mxinfo " id="T3:U241"><span class="mxinfo " id="T3:U242">1</span>-<span class="var type1" id="S40T3U314">weight</span></span>) * <span class="mxinfo " id="T3:U244"><span class="var type1" id="S11T5U316">aerodata</span>(<span class="var type1" id="S28T3U317">k</span>,<span class="mxinfo " id="T3:U247">3</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,60" id="srcline60">60</a></span><span class="line">        <span class="mxinfo " id="T3:U248"><span class="var type1" id="S5T3U321">CL</span> = <span class="mxinfo " id="T3:U250"><span class="mxinfo " id="T3:U251"><span class="var type1" id="S40T3U324">weight</span> * <span class="mxinfo " id="T3:U253"><span class="var type1" id="S11T5U326">aerodata</span>(<span class="var type1" id="S28T3U327">k</span>,<span class="mxinfo " id="T3:U256">07</span>)</span></span> + <span class="mxinfo " id="T3:U257">(<span class="mxinfo " id="T3:U258"><span class="mxinfo " id="T3:U259">1</span>-<span class="var type1" id="S40T3U333">weight</span></span>) * <span class="mxinfo " id="T3:U261"><span class="var type1" id="S11T5U335">aerodata</span>(<span class="var type1" id="S28T3U336">k</span>,<span class="mxinfo " id="T3:U264">6</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,61" id="srcline61">61</a></span><span class="line">        <span class="mxinfo " id="T3:U265"><span class="var type1" id="S7T3U340">CP</span> = <span class="mxinfo " id="T3:U267"><span class="mxinfo " id="T3:U268"><span class="var type1" id="S40T3U343">weight</span> * <span class="mxinfo " id="T3:U270"><span class="var type1" id="S11T5U345">aerodata</span>(<span class="var type1" id="S28T3U346">k</span>,<span class="mxinfo " id="T3:U273">10</span>)</span></span> + <span class="mxinfo " id="T3:U274">(<span class="mxinfo " id="T3:U275"><span class="mxinfo " id="T3:U276">1</span>-<span class="var type1" id="S40T3U352">weight</span></span>) * <span class="mxinfo " id="T3:U278"><span class="var type1" id="S11T5U354">aerodata</span>(<span class="var type1" id="S28T3U355">k</span>,<span class="mxinfo " id="T3:U281">9</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,62" id="srcline62">62</a></span><span class="line">    <span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="53,63" id="srcline63">63</a></span><span class="line">        <span class="mxinfo " id="T3:U282"><span class="var type1" id="S4T3U360">CD</span> = <span class="mxinfo " id="T3:U284">1e10</span></span>; <span class="comment">% yikes</span></span></span>
<span class="srcline"><span class="lineno"><a href="53,64" id="srcline64">64</a></span><span class="line">        <span class="mxinfo " id="T3:U285"><span class="var type1" id="S5T3U364">CL</span> = <span class="mxinfo " id="T3:U287">1e10</span></span>; <span class="comment">% yikes</span></span></span>
<span class="srcline"><span class="lineno"><a href="53,65" id="srcline65">65</a></span><span class="line">        <span class="mxinfo " id="T3:U288"><span class="var type1" id="S7T3U368">CP</span> = <span class="mxinfo " id="T3:U290">1e10</span></span>; <span class="comment">% yikes</span></span></span>
<span class="srcline"><span class="lineno"><a href="53,66" id="srcline66">66</a></span><span class="line">        <span class="autoExtrinsicFcn" id="F85N3:B372">disp</span>(<span class="string">'yo, aoa &gt; 4'</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="53,67" id="srcline67">67</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="53,68" id="srcline68">68</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="53,69" id="srcline69">69</a></span><span class="line">    <span class="mxinfo " id="T3:U291"><span class="var type1" id="S2T3U376">Fdrag</span> = <span class="mxinfo " id="T3:U293"><span class="mxinfo " id="T3:U294"><span class="mxinfo " id="T3:U295"><span class="mxinfo " id="T3:U296"><span class="var type1" id="S4T3U381">CD</span> .* <span class="var type1" id="S37T3U382">Sdrag</span></span> .* <span class="mxinfo " id="T3:U299">0.5</span></span> .* <span class="var type1" id="S23T3U384">rho</span></span> .* <span class="mxinfo " id="T3:U301">(<span class="mxinfo " id="T3:U302"><span class="mxinfo " id="T3:U303">cosd(<span class="var type1" id="S6T3U390">aoa</span>)</span> .* <span class="var type1" id="S15T3U391">umag</span></span>).^2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,70" id="srcline70">70</a></span><span class="line">    <span class="mxinfo " id="T3:U306"><span class="var type1" id="S3T3U395">Flift</span> = <span class="mxinfo " id="T3:U308"><span class="mxinfo " id="T3:U309"><span class="mxinfo " id="T3:U310"><span class="mxinfo " id="T3:U311"><span class="var type1" id="S5T3U400">CL</span> .* <span class="var type1" id="S39T3U401">Slift</span></span> .* <span class="mxinfo " id="T3:U314">0.5</span></span> .* <span class="var type1" id="S23T3U403">rho</span></span> .* <span class="mxinfo " id="T3:U316">(<span class="mxinfo " id="T3:U317"><span class="mxinfo " id="T3:U318">sind(<span class="var type1" id="S6T3U409">aoa</span>)</span> .* <span class="var type1" id="S15T3U410">umag</span></span>).^2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,71" id="srcline71">71</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="53,72" id="srcline72">72</a></span><span class="line"><span class="keyword">elseif</span> <span class="mxinfo " id="T18:U321"><span class="mxinfo " id="T3:U322"><span class="var type1" id="S9T20U416">u</span>(<span class="mxinfo " id="T19:U324">2</span>)</span> &lt; <span class="mxinfo " id="T3:U325"><span class="mxinfo " id="T14:U326"><span class="var type1" id="S12T7U420">rocket</span>.drogue</span>.deploy_u</span></span> &amp;&amp; <span class="mxinfo " id="T18:U328"><span class="mxinfo " id="T3:U329"><span class="var type1" id="S8T20U425">r</span>(<span class="mxinfo " id="T19:U331">2</span>)</span> &gt; <span class="mxinfo " id="T3:U332"><span class="mxinfo " id="T15:U333"><span class="var type1" id="S12T7U429">rocket</span>.main</span>.deploy_h</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="53,73" id="srcline73">73</a></span><span class="line">    <span class="mxinfo " id="T3:U335"><span class="var type1" id="S4T3U434">CD</span> = <span class="mxinfo " id="T3:U337">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,74" id="srcline74">74</a></span><span class="line">    <span class="mxinfo " id="T3:U338"><span class="var type1" id="S5T3U438">CL</span> = <span class="mxinfo " id="T3:U340">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,75" id="srcline75">75</a></span><span class="line">    <span class="mxinfo " id="T3:U341"><span class="var type1" id="S7T3U442">CP</span> = <span class="mxinfo " id="T3:U343"><span class="var type1" id="S11T5U444">aerodata</span>(<span class="mxinfo " id="T3:U345">1</span>,<span class="mxinfo " id="T3:U346">8</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,76" id="srcline76">76</a></span><span class="line">    <span class="mxinfo " id="T3:U347"><span class="var type1" id="S2T3U449">Fdrag</span> = <span class="mxinfo " id="T3:U349"><span class="mxinfo " id="T3:U350"><span class="mxinfo " id="T3:U351"><span class="mxinfo " id="T3:U352"><span class="mxinfo " id="T3:U353"><span class="mxinfo " id="T14:U354"><span class="var type1" id="S12T7U456">rocket</span>.drogue</span>.Cd</span>.*<span class="mxinfo " id="T3:U356"><span class="mxinfo " id="T14:U357"><span class="var type1" id="S12T7U461">rocket</span>.drogue</span>.S</span></span>.*<span class="mxinfo " id="T3:U359">0.5</span></span>.*<span class="var type1" id="S23T3U465">rho</span></span>.*<span class="mxinfo " id="T3:U361"><span class="var type1" id="S14T3U467">uy</span>.^2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,77" id="srcline77">77</a></span><span class="line">    <span class="mxinfo " id="T3:U363"><span class="var type1" id="S3T3U471">Flift</span> = <span class="mxinfo " id="T3:U365"><span class="mxinfo " id="T3:U366"><span class="mxinfo " id="T3:U367"><span class="mxinfo " id="T3:U368"><span class="var type1" id="S5T3U476">CL</span>.*<span class="var type1" id="S39T3U477">Slift</span></span>.*<span class="mxinfo " id="T3:U371">0.5</span></span>.*<span class="var type1" id="S23T3U479">rho</span></span>.*<span class="mxinfo " id="T3:U373">(<span class="mxinfo " id="T3:U374"><span class="var type1" id="S13T3U483">ux</span>-<span class="var type1" id="S10T3U484">wind</span></span>).^2</span></span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="53,78" id="srcline78">78</a></span><span class="line">    </span></span>
<span class="srcline"><span class="lineno"><a href="53,79" id="srcline79">79</a></span><span class="line"><span class="keyword">elseif</span> <span class="mxinfo " id="T18:U377"><span class="mxinfo " id="T3:U378"><span class="var type1" id="S8T20U489">r</span>(<span class="mxinfo " id="T19:U380">2</span>)</span> &lt; <span class="mxinfo " id="T3:U381"><span class="mxinfo " id="T15:U382"><span class="var type1" id="S12T7U493">rocket</span>.main</span>.deploy_h</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="53,80" id="srcline80">80</a></span><span class="line">    <span class="mxinfo " id="T3:U384"><span class="var type1" id="S4T3U498">CD</span> = <span class="mxinfo " id="T3:U386">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,81" id="srcline81">81</a></span><span class="line">    <span class="mxinfo " id="T3:U387"><span class="var type1" id="S5T3U502">CL</span> = <span class="mxinfo " id="T3:U389">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,82" id="srcline82">82</a></span><span class="line">    <span class="mxinfo " id="T3:U390"><span class="var type1" id="S7T3U506">CP</span> = <span class="mxinfo " id="T3:U392"><span class="var type1" id="S11T5U508">aerodata</span>(<span class="mxinfo " id="T3:U394">1</span>,<span class="mxinfo " id="T3:U395">8</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,83" id="srcline83">83</a></span><span class="line">    <span class="mxinfo " id="T3:U396"><span class="var type1" id="S2T3U513">Fdrag</span> = <span class="mxinfo " id="T3:U398"><span class="mxinfo " id="T3:U399"><span class="mxinfo " id="T3:U400"><span class="mxinfo " id="T3:U401"><span class="mxinfo " id="T3:U402"><span class="mxinfo " id="T15:U403"><span class="var type1" id="S12T7U520">rocket</span>.main</span>.Cd</span>.*<span class="mxinfo " id="T3:U405"><span class="mxinfo " id="T15:U406"><span class="var type1" id="S12T7U525">rocket</span>.main</span>.S</span></span>.*<span class="mxinfo " id="T3:U408">0.5</span></span>.*<span class="var type1" id="S23T3U529">rho</span></span>.*<span class="mxinfo " id="T3:U410"><span class="var type1" id="S14T3U531">uy</span>.^2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,84" id="srcline84">84</a></span><span class="line">    <span class="mxinfo " id="T3:U412"><span class="var type1" id="S3T3U535">Flift</span> = <span class="mxinfo " id="T3:U414"><span class="mxinfo " id="T3:U415"><span class="mxinfo " id="T3:U416"><span class="mxinfo " id="T3:U417"><span class="var type1" id="S5T3U540">CL</span>.*<span class="var type1" id="S39T3U541">Slift</span></span>.*<span class="mxinfo " id="T3:U420">0.5</span></span>.*<span class="var type1" id="S23T3U543">rho</span></span>.*<span class="mxinfo " id="T3:U422">(<span class="mxinfo " id="T3:U423"><span class="var type1" id="S13T3U547">ux</span>-<span class="var type1" id="S10T3U548">wind</span></span>).^2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,85" id="srcline85">85</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="53,86" id="srcline86">86</a></span><span class="line">    <span class="mxinfo " id="T3:U426"><span class="var type1" id="S4T3U553">CD</span> = <span class="mxinfo " id="T3:U428">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,87" id="srcline87">87</a></span><span class="line">    <span class="mxinfo " id="T3:U429"><span class="var type1" id="S5T3U557">CL</span> = <span class="mxinfo " id="T3:U431">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,88" id="srcline88">88</a></span><span class="line">    <span class="mxinfo " id="T3:U432"><span class="var type1" id="S7T3U561">CP</span> = <span class="mxinfo " id="T3:U434"><span class="var type1" id="S11T5U563">aerodata</span>(<span class="mxinfo " id="T3:U436">1</span>,<span class="mxinfo " id="T3:U437">8</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,89" id="srcline89">89</a></span><span class="line">    <span class="mxinfo " id="T3:U438"><span class="var type1" id="S2T3U568">Fdrag</span> = <span class="mxinfo " id="T3:U440">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,90" id="srcline90">90</a></span><span class="line">    <span class="mxinfo " id="T3:U441"><span class="var type1" id="S3T3U572">Flift</span> = <span class="mxinfo " id="T3:U443">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="53,91" id="srcline91">91</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="53,92" id="srcline92">92</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="53,93" id="srcline93">93</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
